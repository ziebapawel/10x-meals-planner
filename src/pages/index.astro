---
import Layout from "../layouts/Layout.astro";
import { HomeAndPlanGenerationView } from "../components/HomeAndPlanGenerationView";
import { Toaster } from "../components/ui/sonner";

// Check authentication
const supabase = Astro.locals.supabase;
const {
  data: { session },
} = await supabase.auth.getSession();

Redirect to login if not authenticated
if (!session) {
  return Astro.redirect("/login");
}
---

<Layout title="Planer Posiłków - Generuj swój plan żywieniowy">
  <HomeAndPlanGenerationView client:load />
  <Toaster client:load />
</Layout>
