---
import Layout from "../layouts/Layout.astro";
import { MealPlanHistoryView } from "../components/MealPlanHistoryView";
import { Toaster } from "../components/ui/sonner";

// Get user from Astro.locals (set by middleware)
const user = Astro.locals.user;

// Redirect to login if not authenticated
if (!user) {
  return Astro.redirect("/login");
}
---

<Layout title="Moje Plany Posiłków - Planer Posiłków">
  <MealPlanHistoryView client:load />
  <Toaster client:load />
</Layout>
